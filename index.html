<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Mud9Bot - 2048</title>

  <link href="style/main.css" rel="stylesheet" type="text/css">
  <link rel="shortcut icon" href="favicon.ico">


  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0, maximum-scale=1, user-scalable=no, minimal-ui">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script>
  function getQueryVariable(variable)
  {
         var query = window.location.search.substring(1);
         var vars = query.split("&");
         for (var i=0;i<vars.length;i++) {
                 var pair = vars[i].split("=");
                 if(pair[0] == variable){return pair[1];}
         }
         return(false);
  }
  function updateHighScores(){
    var key = "";
    $.getJSON("config.json", function(json) {
          key = json.api_key; // access the first object proprty of the array
    a = getQueryVariable("user_id");
    b = getQueryVariable("inline_message_id");
    if (b == false){
      b = getQueryVariable("chat_id");
      c = getQueryVariable("msgid")
      var link = "https://api.telegram.org/bot" + key + "/getGameHighScores?user_id=" + a + "&chat_id=" + b + "&message_id=" + c;
    }else{
      var link = "https://api.telegram.org/bot" + key + "/getGameHighScores?user_id=" + a + "&inline_message_id=" + b;
    }
    $.getJSON(link, function(result){
      $("#show-json-span").empty();
      $("#show-json-span").append("<p>");
        $.each(result.result, function(index, value){
            $("#show-json-span").append(value.position + ": " + value.user.first_name + " - " + value.score + "<br/>");
        });
        $("#show-json-span").append("</p>");
      });
      });
  }
  updateHighScores();
  </script>
</head>
<body onload="openNav();">
<div class="container">
  <div class="heading">
    <h1 class="title">2048 @Mud9Bot</h1>
    <div class="scores-container">
      <div class="score-container">0</div>
      <div class="best-container">0</div>
    </div>
  </div>

  <div class="above-game">
    <p class="game-intro">Join the numbers and get to <strong>2048!</strong></p>
    <a class="restart-button">Restart</a>
  </div>

  <!--something-->
  <div id="myNav" class="overlay">

    <!-- Overlay content -->
    <div class="overlay-content" id="show-json">
      <h1>2048 @Mud9Bot</h1>
      <span id="show-json-span"></span>

    </div>
    <p></p>
    <p></p>
      <p><a href="javascript:void(0)" class="closebtn" onclick="closeNav()">Start</a></p>
      <p><a href="javascript:void(0)" class="closebtn" onclick="openInfo()">Info</a></p>

  </div>

  <!--something-->
  <div id="infoDiv" class="overlay2">

    <!-- Overlay content -->
    <div class="overlay2-content">
      <h1>2048 @Mud9Bot Info <a href="javascript:void(0)" class="closebtn" onclick="closeInfo()">X</a></h1> 
      <div class="overlay2-content-inside">
      <p>
      <strong class="important">How to play:</strong> <br/><i>Computer:</i> Use your <strong>arrow keys</strong> to move the tiles. <br/> <i>Mobile: </i> Move the tiles using your <strong>fingers</strong>. <br/> When two tiles with the same number touch, they <strong>merge into one!</strong>
      <hr>
      <strong class="important">Note:</strong> This site is <strong>NOT</strong> the official version of 2048. You can play the official one via <a href="http://git.io/2048">http://git.io/2048.</a>
      <hr>
      This is a clone of the 2048 game on <a href="http://t.me/Mud9Bot">Mud9Bot</a>. The original game is created by <a href="http://gabrielecirulli.com" target="_blank">Gabriele Cirulli.</a> Based on <a href="https://itunes.apple.com/us/app/1024!/id823499224" target="_blank">1024 by Veewo Studio</a> and conceptually similar to <a href="http://asherv.com/threes/" target="_blank">Threes by Asher Vollmer.</a>
      <hr>
        Original Code: <a href="https://github.com/gabrielecirulli/2048">GitHub Page</a> <br/> License: <a href="https://github.com/jeffffc/2048/blob/master/LICENSE.txt">MIT</a>
      </p>
    </div>
    </div>

  </div>
    <!--something-->
    <div class="game-container">

      <div class="game-message">
        <p></p>
        <div class="lower">
	        <a class="keep-playing-button">Keep going</a>
          <a class="retry-button">Try again</a>
        </div>
      </div>

      <div class="grid-container">

        <div class="grid-row">
          <div class="grid-cell"></div>
          <div class="grid-cell"></div>
          <div class="grid-cell"></div>
          <div class="grid-cell"></div>
        </div>
        <div class="grid-row">
          <div class="grid-cell"></div>
          <div class="grid-cell"></div>
          <div class="grid-cell"></div>
          <div class="grid-cell"></div>
        </div>
        <div class="grid-row">
          <div class="grid-cell"></div>
          <div class="grid-cell"></div>
          <div class="grid-cell"></div>
          <div class="grid-cell"></div>
        </div>
        <div class="grid-row">
          <div class="grid-cell"></div>
          <div class="grid-cell"></div>
          <div class="grid-cell"></div>
          <div class="grid-cell"></div>
        </div>
      </div>

      <div class="tile-container">

      </div>
    </div>


  </div>

  <script>
  function openNav() {
    updateHighScores();
    document.getElementById("myNav").style.width = "100%";
  }

  function closeNav() {
    document.getElementById("myNav").style.width = "0%";
  }

  function openInfo() {
    document.getElementById("infoDiv").style.width = "100%";
  }

  function closeInfo() {
    document.getElementById("infoDiv").style.width = "0%";
  }
  </script>
  <script>
  function getQueryVariable(variable)
  {
         var query = window.location.search.substring(1);
         var vars = query.split("&");
         for (var i=0;i<vars.length;i++) {
                 var pair = vars[i].split("=");
                 if(pair[0] == variable){return pair[1];}
         }
         return(false);
  }
  function sendNewScore(newscore){
    $.getJSON("config.json", function(json) {
          key = json.api_key; // access the first object proprty of the array
    var link = "https://api.telegram.org/bot" + key + "/setGameScore";
    a = getQueryVariable("user_id");
    b = getQueryVariable("inline_message_id");
    if (b == false){
      b = getQueryVariable("chat_id");
      c = getQueryVariable("msgid")
      $.post(link,
      {
        score: newscore,
        user_id: a,
        chat_id: b,
        message_id: c
      },
      function(data,status){
          console.log(status);
      });
    }else{
          $.post(link,
          {
            score: newscore,
            user_id: a,
            inline_message_id: b,
          },
          function(data,status){
              console.log(status);
          });
        }
        });
      }
  function updateHighScores(){
    var key = "";
    $.getJSON("config.json", function(json) {
          key = json.api_key; // access the first object proprty of the array
    a = getQueryVariable("user_id");
    b = getQueryVariable("inline_message_id");
    if (b == false){
      b = getQueryVariable("chat_id");
      c = getQueryVariable("msgid")
      var link = "https://api.telegram.org/bot" + key + "/getGameHighScores?user_id=" + a + "&chat_id=" + b + "&message_id=" + c;
    }else{
      var link = "https://api.telegram.org/bot" + key + "/getGameHighScores?user_id=" + a + "&inline_message_id=" + b;
    }
      $.getJSON(link, function(result){
        $("#show-json-span").empty();
        $("#show-json-span").append("<p>");
          $.each(result.result, function(index, value){
              $("#show-json-span").append(value.position + ": " + value.user.first_name + " - " + value.score + "<br/>");
          });
          $("#show-json-span").append("</p>");
      });
      });
  }

  </script>
  <script src="js/bind_polyfill.js"></script>
  <script src="js/classlist_polyfill.js"></script>
  <script src="js/animframe_polyfill.js"></script>
  <script src="js/keyboard_input_manager.js"></script>
  <script src="js/html_actuator.js"></script>
  <script src="js/grid.js"></script>
  <script src="js/tile.js"></script>
  <script src="js/local_storage_manager.js"></script>
  <script src="js/game_manager.js"></script>
  <script src="js/application.js"></script>



</body>
</html>
